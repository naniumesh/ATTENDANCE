<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - Attendance</title>
  <link rel="stylesheet" href="css/admin.css" />
</head>
<body>
  <header class="header">
    <img src="IMG FOR PAGE/2020010996.png" alt="Organization Logo" class="logo" />
    <h1 class="header-title">Admin Panel</h1>
    <img src="IMG FOR PAGE/seal.svg" alt="University Logo" class="logo" />
  </header>

  <div class="top-buttons">
    <button onclick="showSection('attendanceSection')">Attendance Checking</button>
    <button onclick="showSection('studentSection')">Add Student</button>
    <button onclick="showSection('scheduleSection')">Class Schedule</button>
    <button onclick="showSection('staffSection')">Add Staff</button>
    <!--Log Out Button-->
    <button id="logoutBtn" style=
    "background-color: #e74c3c;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;">Logout
    </button>
  </div>
  


  <!-- Attendance Section -->
   <div id="attendanceSection" class="section" style="display:none">
    <h2>Attendance Records</h2>

    <div style="text-align: right; margin-bottom: 10px;">
      <label for="presentDateFilter"><strong>Show Present on:</strong></label>
      <select id="presentDateFilter" onchange="filterPresentByDate()">
        <option value="">-- Select Date --</option>
        <!-- JS will populate options -->
      </select>
      <span id="presentCount" style="margin-left: 10px; font-weight: bold;"></span>
    </div>

    <table id="attendanceTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll No</th>
          <th>Reg No</th>
          <th>Battalion</th>
          <th>Attendance %</th>
          <th>History</th>
          <th>Update</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div id="presentList" style="margin-top:20px;"></div>
  </div>


<!-- Student Section -->
<div id="studentSection" class="section" style="display:none">
  <h2>Students</h2>
  <p id="studentCounts"></p>

  <!-- Student Form -->
  <form id="studentForm">
    <input type="text" name="name" placeholder="Name" required />
    <select name="rank" required>
      <option value="">Select Rank</option>
      <option value="CDT">CDT</option>
      <option value="L/CPL">L/CPL</option>
      <option value="CPL">CPL</option>
      <option value="SGT">SGT</option>
      <option value="CQMS">CQMS</option>
      <option value="CSM">CSM</option>
      <option value="UO">UO</option>
      <option value="SUO">SUO</option>
    </select>
    <input type="text" name="rollNo" placeholder="Roll No" required />
    <input type="text" name="regNo" placeholder="Reg No" />
    <input type="date" name="dob" placeholder="DOB" />
    <input type="text" name="contactNo" placeholder="Contact No" />
    <select name="gender" required>
      <option value="">Select Gender</option>
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <select name="year" required>
      <option value="">Select Year</option>
      <option value="1">1st Year</option>
      <option value="2">2nd Year</option>
      <option value="3">3rd Year</option>
    </select>
    <select name="classSection" required>
      <option value="">Select Battalion</option>
      <option value="2 PB">2 PB</option>
      <option value="2 PB(GIRLS)">2 PB(GIRLS)</option>
      <option value="2 PB NAVY">2 PB NAVY</option>
      <option value="8 PB(REGULAR)">8 PB(REGULAR)</option>
      <option value="8 PB(FSFS)">8 PB(FSFS)</option>
      <option value="1 AIR PB">1 AIR PB</option>
    </select>
    <button type="submit">Add Student</button>
  </form>

  <!-- Excel Upload -->
  <hr>

<!-- ================= STUDENT ACTIONS ================= -->

<h3>‚öô Student Actions</h3>

<button onclick="toggleDeleteYear()" style="background:#e74c3c;color:white;">
  üóë Delete Students
</button>

<button onclick="togglePromotion()" style="background:#27ae60;color:white;margin-left:10px;">
  üéì Promotion
</button>

<!-- ===== DELETE BY YEAR BLOCK ===== -->
<div id="deleteYearBlock" style="display:none;margin-top:15px;">
  <h3 style="color:red;">‚ö† Delete Students by Year</h3>

  <select id="deleteYearSelect">
    <option value="">Select Year</option>
    <option value="1">1st Year</option>
    <option value="2">2nd Year</option>
    <option value="3">3rd Year</option>
  </select>

  <button onclick="checkDeleteByYear()" style="background:#e67e22;color:white;">
    Check Count
  </button>

  <button onclick="confirmDeleteByYear()" style="background:#c0392b;color:white;">
    Confirm Delete
  </button>

  <p id="deleteYearInfo" style="font-weight:bold;"></p>
</div>

<!-- ===== PROMOTION BLOCK ===== -->
<div id="promotionBlock" style="display:none;margin-top:15px;">
  <h3 style="color:#27ae60;">üéì Year Promotion</h3>

  <select id="fromYear">
    <option value="">From Year</option>
    <option value="1">1st Year</option>
    <option value="2">2nd Year</option>
  </select>

  <select id="toYear">
    <option value="">To Year</option>
    <option value="2">2nd Year</option>
    <option value="3">3rd Year</option>
  </select>

  <button onclick="checkPromotion()" style="background:#2ecc71;color:white;">
    Check Promotion
  </button>

  <button onclick="confirmPromotion()" style="background:#1e8449;color:white;">
    Confirm Promotion
  </button>

  <p id="promotionInfo" style="font-weight:bold;"></p>
</div>

  <!-- Excel Upload -->
  <div class="upload-block">
  <!-- CHOOSE FILE BUTTON -->
  <label for="excelFile">Choose Excel File</label>

  <!-- HIDDEN FILE INPUT -->
  <input type="file" id="excelFile" accept=".xls,.xlsx" />

  <!-- FILE NAME DISPLAY -->
  <p id="selectedFileName" style="margin-top:6px;font-weight:bold;"></p>

  <!-- UPLOAD BUTTON -->
  <button type="button" id="uploadBtn" onclick="uploadExcel()">
    Upload Excel
  </button>
</div>

<h3 style="color:#e67e22;">üîÅ Re-upload Excel File</h3>

<input type="text" id="deleteFileName" placeholder="Enter Excel file name">

<button onclick="checkDeleteByFile()" style="background:#f39c12;color:white;">
  Check File
</button>

<button onclick="confirmDeleteByFile()" style="background:#c0392b;color:white;">
  Delete & Allow Re-upload
</button>

<p id="deleteFileInfo" style="font-weight:bold;"></p>

  <button
  type="button"
  onclick="downloadExcelTemplate()"
  style="background:#2ecc71;color:white;padding:6px 12px;margin-bottom:10px;"
>
  ‚¨á Download Excel Template FOR EXAMPLE
</button>

  <!-- Search Only -->
  <div class="student-search-block">
    <input type="text" id="studentSearch" placeholder="Search students..." />
  </div>

  <!-- Class Filter Buttons -->
  <div id="classButtons" style="margin-bottom: 15px;">
    <button type="button" class="class-btn" data-class="2 PB">2 PB</button>
    <button type="button" class="class-btn" data-class="2 PB(GIRLS)">2 PB(GIRLS)</button>
    <button type="button" class="class-btn" data-class="2 PB NAVY">2 PB NAVY</button>
    <button type="button" class="class-btn" data-class="8 PB(REGULAR)">8 PB(REGULAR)</button>
    <button type="button" class="class-btn" data-class="8 PB(FSFS)">8 PB(FSFS)</button>
    <button type="button" class="class-btn" data-class="1 AIR PB">AIR</button>
    <button type="button" id="resetFilter">Show All Students</button>
  </div>

  <!-- Student Table -->
  <table id="studentTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Rank</th>
        <th>Roll No</th>
        <th>Reg No</th>
        <th>DOB</th>
        <th>Contact No</th>
        <th>Gender</th>
        <th>Year</th>
        <th>Class</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>



  <!-- Staff Section -->
  <div id="staffSection" class="section" style="display:none">
    <h2>Add Staff</h2>
    <form id="staffForm">
      <input type="text" name="name" placeholder="Name" required>
      <input type="text" name="username" placeholder="Username" required>
      <input type="password" name="password" placeholder="Password" required>
      <input type="text" name="regNo" placeholder="Reg No" required>
      <input type="password" name="pin" placeholder="PIN for Attendance" required>
      <button type="submit">Add Staff</button>
    </form>
    <table id="staffTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Username</th>
          <th>Reg No</th>
          <th>PIN</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Class Schedule Section -->
  <div id="scheduleSection" class="section" style="display:none">
    <h2>Class Schedule</h2>
    <form id="scheduleForm" style="margin-bottom: 20px;">
      <label>
        Date:
        <input type="date" name="date" required>
      </label>
      <label>
        Start Time:
        <input type="time" name="startTime" required>
      </label>
      <label>
        End Time:
        <input type="time" name="endTime" required>
      </label>
      <button type="submit">Add Schedule</button>
    </form>

    <table id="scheduleTable" border="1" style="width:100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th>Date</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <br>
    <!-- VIEW HISTORY BUTTON -->
    <button id="viewHistoryBtn" class="view-history-btn">
      üìú View Class History
    </button>

    <!-- HISTORY MODAL -->
    <div id="historyModal" class="history-modal">
      <div class="history-modal-content">
        <span class="history-close-btn">&times; Close</span>
        <h3>Class History</h3>
        <div id="historyContainer"></div>
      </div>
    </div>
  </div>

  <script src="js/admin.js"></script>
</body>
</html>
